# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹ PMSpec é¡¹ç›®çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»£ç ã€æ–‡æ¡£ã€é—®é¢˜åé¦ˆå’ŒåŠŸèƒ½å»ºè®®ã€‚

## ç›®å½•

- [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)
- [å¼€å‘ç¯å¢ƒè®¾ç½®](#å¼€å‘ç¯å¢ƒè®¾ç½®)
- [å¼€å‘å·¥ä½œæµ](#å¼€å‘å·¥ä½œæµ)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æµ‹è¯•è¦æ±‚](#æµ‹è¯•è¦æ±‚)
- [é¡¹ç›®æ¨¡å—è¯´æ˜](#é¡¹ç›®æ¨¡å—è¯´æ˜)
- [æäº¤ Issue](#æäº¤-issue)
- [æäº¤ PR](#æäº¤-pr)

---

## è¡Œä¸ºå‡†åˆ™

æˆ‘ä»¬è‡´åŠ›äºä¸ºæ‰€æœ‰äººæä¾›ä¸€ä¸ªå‹å¥½ã€å®‰å…¨å’Œæ¬¢è¿çš„ç¯å¢ƒã€‚å‚ä¸æœ¬é¡¹ç›®æ—¶ï¼Œè¯·éµå®ˆä»¥ä¸‹å‡†åˆ™ï¼š

- **å°Šé‡ä»–äºº** - å¯¹æ‰€æœ‰è´¡çŒ®è€…ä¿æŒå°Šé‡å’Œå‹å–„
- **åŒ…å®¹å¤šå…ƒ** - æ¬¢è¿æ¥è‡ªä¸åŒèƒŒæ™¯çš„è´¡çŒ®è€…
- **å»ºè®¾æ€§æ²Ÿé€š** - æä¾›æœ‰å»ºè®¾æ€§çš„åé¦ˆï¼Œé¿å…äººèº«æ”»å‡»
- **ä¸“æ³¨äºé¡¹ç›®** - è®¨è®ºåº”å›´ç»•é¡¹ç›®æœ¬èº«å±•å¼€
- **æ¥å—æ‰¹è¯„** - ä»¥å¼€æ”¾å¿ƒæ€æ¥å—å»ºè®¾æ€§æ„è§

è¿åè¡Œä¸ºå‡†åˆ™çš„è¡Œä¸ºå¯èƒ½å¯¼è‡´è¢«ç§»é™¤å‡ºé¡¹ç›®ç¤¾åŒºã€‚

---

## å¼€å‘ç¯å¢ƒè®¾ç½®

### ç³»ç»Ÿè¦æ±‚

- **Node.js**: >= 20.0.0 (æ¨èä½¿ç”¨ LTS ç‰ˆæœ¬)
- **npm**: >= 10.0.0
- **Git**: >= 2.30

### å…‹éš†ä»“åº“å’Œå®‰è£…ä¾èµ–

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/pmspec/pmspec.git
cd pmspec

# å®‰è£… CLI æ ¸å¿ƒä¾èµ–
npm install

# å®‰è£… Web æ¨¡å—ä¾èµ– (å¦‚éœ€å¼€å‘ Web åŠŸèƒ½)
cd web/backend && npm install && cd ../..
cd web/frontend && npm install && cd ../..
cd web/shared && npm install && cd ../..
```

### é¡¹ç›®ç»“æ„è¯´æ˜

```
pmspec/
â”œâ”€â”€ bin/                  # CLI å¯æ‰§è¡Œå…¥å£
â”œâ”€â”€ src/                  # CLI æ ¸å¿ƒæºä»£ç 
â”‚   â”œâ”€â”€ cli/              # CLI ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ commands/         # CLI å‘½ä»¤å®ç°
â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.ts          # ä¸»å…¥å£
â”œâ”€â”€ web/                  # Web åº”ç”¨
â”‚   â”œâ”€â”€ backend/          # åç«¯æœåŠ¡ (API)
â”‚   â”œâ”€â”€ frontend/         # å‰ç«¯åº”ç”¨ (UI)
â”‚   â””â”€â”€ shared/           # å…±äº«ç±»å‹å®šä¹‰
â”œâ”€â”€ demo/                 # ç¤ºä¾‹é¡¹ç›®
â”œâ”€â”€ examples/             # ç¤ºä¾‹æ–‡ä»¶
â”œâ”€â”€ openspec/             # OpenSpec è§„èŒƒæ–‡ä»¶
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜
```

---

## å¼€å‘å·¥ä½œæµ

### Git åˆ†æ”¯ç­–ç•¥

æˆ‘ä»¬é‡‡ç”¨åŸºäºåŠŸèƒ½åˆ†æ”¯çš„å¼€å‘æ¨¡å¼ï¼š

| åˆ†æ”¯ç±»å‹ | å‘½åæ ¼å¼ | ç”¨é€” |
|---------|---------|------|
| `main` | - | ç¨³å®šçš„ä¸»åˆ†æ”¯ï¼Œéšæ—¶å¯å‘å¸ƒ |
| `feature/*` | `feature/add-export-json` | æ–°åŠŸèƒ½å¼€å‘ |
| `fix/*` | `fix/csv-parsing-error` | Bug ä¿®å¤ |
| `docs/*` | `docs/update-readme` | æ–‡æ¡£æ›´æ–° |
| `refactor/*` | `refactor/cli-structure` | ä»£ç é‡æ„ |
| `chore/*` | `chore/upgrade-deps` | æ„å»º/ä¾èµ–ç­‰æ‚é¡¹ |

```bash
# åˆ›å»ºæ–°åŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature-name

# åˆ›å»º bug ä¿®å¤åˆ†æ”¯
git checkout -b fix/issue-description
```

### Commit æ¶ˆæ¯æ ¼å¼

æˆ‘ä»¬éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

```
<type>(<scope>): <description>

[optional body]

[optional footer(s)]
```

**Type ç±»å‹ï¼š**

| ç±»å‹ | è¯´æ˜ |
|-----|------|
| `feat` | æ–°åŠŸèƒ½ |
| `fix` | Bug ä¿®å¤ |
| `docs` | æ–‡æ¡£æ›´æ–° |
| `style` | ä»£ç æ ¼å¼ (ä¸å½±å“ä»£ç é€»è¾‘) |
| `refactor` | ä»£ç é‡æ„ (æ—¢ä¸æ˜¯æ–°åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®å¤) |
| `perf` | æ€§èƒ½ä¼˜åŒ– |
| `test` | æµ‹è¯•ç›¸å…³ |
| `chore` | æ„å»º/å·¥å…·é“¾/ä¾èµ–æ›´æ–° |

**Scope èŒƒå›´ï¼ˆå¯é€‰ï¼‰ï¼š**
- `cli` - CLI ç›¸å…³
- `backend` - åç«¯ç›¸å…³
- `frontend` - å‰ç«¯ç›¸å…³
- `shared` - å…±äº«æ¨¡å—
- `core` - æ ¸å¿ƒé€»è¾‘

**ç¤ºä¾‹ï¼š**

```bash
# æ–°åŠŸèƒ½
git commit -m "feat(cli): add export to JSON format"

# Bug ä¿®å¤
git commit -m "fix(core): resolve CSV parsing issue with empty fields"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: update installation guide"

# å¸¦ body çš„æäº¤
git commit -m "feat(backend): implement user authentication

- Add JWT token generation
- Add login/logout endpoints
- Add middleware for protected routes

Closes #123"
```

### PR æµç¨‹

1. **åˆ›å»ºåˆ†æ”¯** - ä» `main` åˆ›å»ºåŠŸèƒ½/ä¿®å¤åˆ†æ”¯
2. **å¼€å‘** - å®Œæˆä»£ç ç¼–å†™å’Œæµ‹è¯•
3. **è‡ªæ£€** - è¿è¡Œ lint å’Œæµ‹è¯•ç¡®ä¿é€šè¿‡
4. **æ¨é€** - æ¨é€åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“
5. **åˆ›å»º PR** - åœ¨ GitHub ä¸Šåˆ›å»º Pull Request
6. **ä»£ç å®¡æŸ¥** - ç­‰å¾…å®¡æŸ¥å¹¶å“åº”åé¦ˆ
7. **åˆå¹¶** - å®¡æŸ¥é€šè¿‡ååˆå¹¶åˆ° `main`

---

## ä»£ç è§„èŒƒ

### TypeScript é…ç½®

é¡¹ç›®ä½¿ç”¨ TypeScript å¼€å‘ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š

```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ESNext",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  }
}
```

### ä¸¥æ ¼ç±»å‹è¦æ±‚

- **ç¦æ­¢ä½¿ç”¨ `any`** - ä½¿ç”¨å…·ä½“ç±»å‹æˆ– `unknown`
- **å¯ç”¨ä¸¥æ ¼æ¨¡å¼** - ç¡®ä¿ç±»å‹å®‰å…¨
- **æ˜¾å¼è¿”å›ç±»å‹** - å…¬å…±å‡½æ•°éœ€å£°æ˜è¿”å›ç±»å‹

```typescript
// âŒ é”™è¯¯ç¤ºä¾‹
function parseData(data: any): any {
  return data.value;
}

// âœ… æ­£ç¡®ç¤ºä¾‹
interface ParsedData {
  value: string;
}

function parseData(data: unknown): ParsedData {
  if (typeof data === 'object' && data !== null && 'value' in data) {
    return { value: String((data as { value: unknown }).value) };
  }
  throw new Error('Invalid data format');
}
```

### ESLint è§„åˆ™

è¿è¡Œä»£ç æ£€æŸ¥ï¼š

```bash
npm run lint        # æ£€æŸ¥ä»£ç 
npm run lint:fix    # è‡ªåŠ¨ä¿®å¤
```

ä¸»è¦è§„åˆ™ï¼š
- ä½¿ç”¨å•å¼•å· `'`
- å¥æœ«ä¸åŠ åˆ†å·ï¼ˆå¯é…ç½®ï¼‰
- 2 ç©ºæ ¼ç¼©è¿›
- ç¦æ­¢æœªä½¿ç”¨çš„å˜é‡
- ç¦æ­¢ `console.log`ï¼ˆç”Ÿäº§ä»£ç ï¼‰

### å‘½åçº¦å®š

| ç±»å‹ | çº¦å®š | ç¤ºä¾‹ |
|-----|------|------|
| å˜é‡/å‡½æ•° | camelCase | `getUserName`, `isValid` |
| ç±»/æ¥å£/ç±»å‹ | PascalCase | `UserService`, `FeatureConfig` |
| å¸¸é‡ | UPPER_SNAKE_CASE | `MAX_RETRIES`, `API_URL` |
| æ–‡ä»¶å | kebab-case | `user-service.ts`, `feature-list.ts` |
| æµ‹è¯•æ–‡ä»¶ | `*.test.ts` | `parser.test.ts` |

---

## æµ‹è¯•è¦æ±‚

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:watch

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### æµ‹è¯•è¦†ç›–ç‡è¦æ±‚

- **æ€»ä½“è¦†ç›–ç‡**: >= 80%
- **æ ¸å¿ƒæ¨¡å—è¦†ç›–ç‡**: >= 90%
- **æ–°ä»£ç è¦†ç›–ç‡**: >= 80%

æäº¤ PR æ—¶ï¼Œè¯·ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡ä¸ä¼šä¸‹é™ã€‚

### ç¼–å†™æµ‹è¯•æŒ‡å—

æˆ‘ä»¬ä½¿ç”¨ [Vitest](https://vitest.dev/) ä½œä¸ºæµ‹è¯•æ¡†æ¶ï¼š

```typescript
// src/core/parser.test.ts
import { describe, it, expect, beforeEach } from 'vitest';
import { parseCSV } from './parser';

describe('parseCSV', () => {
  describe('åŸºæœ¬è§£æ', () => {
    it('åº”è¯¥æ­£ç¡®è§£ææ ‡å‡† CSV æ ¼å¼', () => {
      const input = 'id,name\n1,test';
      const result = parseCSV(input);
      
      expect(result).toHaveLength(1);
      expect(result[0]).toEqual({ id: '1', name: 'test' });
    });

    it('åº”è¯¥å¤„ç†ç©ºè¾“å…¥', () => {
      const result = parseCSV('');
      expect(result).toEqual([]);
    });
  });

  describe('è¾¹ç•Œæƒ…å†µ', () => {
    it('åº”è¯¥å¤„ç†åŒ…å«é€—å·çš„å­—æ®µ', () => {
      const input = 'id,name\n1,"hello, world"';
      const result = parseCSV(input);
      
      expect(result[0].name).toBe('hello, world');
    });
  });
});
```

**æµ‹è¯•æ–‡ä»¶ç»„ç»‡ï¼š**
- æµ‹è¯•æ–‡ä»¶ä¸æºæ–‡ä»¶åŒç›®å½•
- æ–‡ä»¶åæ ¼å¼: `[filename].test.ts`
- ä½¿ç”¨ `describe` ç»„ç»‡æµ‹è¯•ç”¨ä¾‹
- æµ‹è¯•æè¿°ä½¿ç”¨ä¸­æ–‡ï¼Œä¾¿äºç†è§£

---

## é¡¹ç›®æ¨¡å—è¯´æ˜

### CLI (`src/`)

å‘½ä»¤è¡Œå·¥å…·æ ¸å¿ƒæ¨¡å—ï¼Œè´Ÿè´£ï¼š
- å‘½ä»¤è§£æå’Œæ‰§è¡Œ
- CSV/Markdown æ–‡ä»¶å¤„ç†
- åŠŸèƒ½è¡¨ç®¡ç†

**ä¸»è¦ç›®å½•ï¼š**
- `cli/` - CLI å¯åŠ¨å’Œé…ç½®
- `commands/` - å„å‘½ä»¤å®ç° (init, add, list, etc.)
- `core/` - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- `utils/` - é€šç”¨å·¥å…·å‡½æ•°

**å¼€å‘å‘½ä»¤ï¼š**
```bash
npm run build      # æ„å»º
npm run dev        # ç›‘å¬æ¨¡å¼æ„å»º
npm run dev:cli    # æ„å»ºå¹¶è¿è¡Œ CLI
```

### Backend (`web/backend/`)

Web æœåŠ¡ç«¯åº”ç”¨ï¼Œæä¾›ï¼š
- RESTful API
- æ•°æ®æŒä¹…åŒ–
- ç”¨æˆ·è®¤è¯

**å¼€å‘å‘½ä»¤ï¼š**
```bash
cd web/backend
npm run dev        # å¼€å‘æ¨¡å¼
npm run build      # æ„å»º
npm run start      # ç”Ÿäº§æ¨¡å¼è¿è¡Œ
```

### Frontend (`web/frontend/`)

Web å‰ç«¯åº”ç”¨ï¼Œæä¾›ï¼š
- å¯è§†åŒ–ç•Œé¢
- åŠŸèƒ½è¡¨ç¼–è¾‘å™¨
- æ•°æ®å±•ç¤º

**å¼€å‘å‘½ä»¤ï¼š**
```bash
cd web/frontend
npm run dev        # å¼€å‘æ¨¡å¼
npm run build      # æ„å»º
npm run preview    # é¢„è§ˆæ„å»ºç»“æœ
```

### Shared Types (`web/shared/`)

å…±äº«ç±»å‹å®šä¹‰æ¨¡å—ï¼š
- å‰åç«¯å…±ç”¨çš„ TypeScript ç±»å‹
- API æ¥å£å®šä¹‰
- æ•°æ®æ¨¡å‹

**ä½¿ç”¨æ–¹å¼ï¼š**
```typescript
import type { Feature, FeatureList } from '@pmspec/shared';
```

---

## æäº¤ Issue

### Bug æŠ¥å‘Š

æäº¤ Bug æ—¶ï¼Œè¯·åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

```markdown
### é—®é¢˜æè¿°
ç®€è¦æè¿°é‡åˆ°çš„é—®é¢˜

### å¤ç°æ­¥éª¤
1. æ‰§è¡Œå‘½ä»¤ '...'
2. è¾“å…¥ '...'
3. æŸ¥çœ‹é”™è¯¯

### æœŸæœ›è¡Œä¸º
æè¿°ä½ æœŸæœ›å‘ç”Ÿçš„è¡Œä¸º

### å®é™…è¡Œä¸º
æè¿°å®é™…å‘ç”Ÿçš„è¡Œä¸º

### ç¯å¢ƒä¿¡æ¯
- æ“ä½œç³»ç»Ÿ: [e.g., Windows 11, macOS 14, Ubuntu 22.04]
- Node.js ç‰ˆæœ¬: [e.g., 20.10.0]
- PMSpec ç‰ˆæœ¬: [e.g., 1.0.0]

### é”™è¯¯æ—¥å¿—
```
ç²˜è´´å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
```

### ç›¸å…³æ–‡ä»¶
å¦‚æœ‰å¿…è¦ï¼Œé™„ä¸Šç›¸å…³é…ç½®æ–‡ä»¶æˆ– CSV å†…å®¹ï¼ˆè„±æ•å¤„ç†ï¼‰
```

### åŠŸèƒ½è¯·æ±‚

æäº¤åŠŸèƒ½è¯·æ±‚æ—¶ï¼Œè¯·åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

```markdown
### åŠŸèƒ½æè¿°
ç®€è¦æè¿°ä½ å¸Œæœ›æ·»åŠ çš„åŠŸèƒ½

### ä½¿ç”¨åœºæ™¯
æè¿°åœ¨ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦è¿™ä¸ªåŠŸèƒ½

### å»ºè®®å®ç°
å¦‚æœæœ‰æƒ³æ³•ï¼Œæè¿°å¯èƒ½çš„å®ç°æ–¹å¼

### æ›¿ä»£æ–¹æ¡ˆ
æ˜¯å¦æœ‰å…¶ä»–æ–¹å¼å¯ä»¥è¾¾åˆ°ç±»ä¼¼æ•ˆæœ

### é™„åŠ ä¿¡æ¯
ä»»ä½•å…¶ä»–ç›¸å…³ä¿¡æ¯ã€æˆªå›¾æˆ–ç¤ºä¾‹
```

---

## æäº¤ PR

### PR æ¨¡æ¿

åˆ›å»º PR æ—¶ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ¨¡æ¿ï¼š

```markdown
## å˜æ›´ç±»å‹

- [ ] æ–°åŠŸèƒ½ (feat)
- [ ] Bug ä¿®å¤ (fix)
- [ ] æ–‡æ¡£æ›´æ–° (docs)
- [ ] ä»£ç é‡æ„ (refactor)
- [ ] æ€§èƒ½ä¼˜åŒ– (perf)
- [ ] æµ‹è¯•ç›¸å…³ (test)
- [ ] æ„å»º/ä¾èµ– (chore)

## å…³è” Issue

Closes #(issue number)

## å˜æ›´æè¿°

ç®€è¦æè¿°æœ¬æ¬¡ PR çš„å˜æ›´å†…å®¹

## å˜æ›´è¯¦æƒ…

- å˜æ›´ç‚¹ 1
- å˜æ›´ç‚¹ 2
- å˜æ›´ç‚¹ 3

## æµ‹è¯•è¯´æ˜

æè¿°å¦‚ä½•æµ‹è¯•è¿™äº›å˜æ›´

## æ£€æŸ¥æ¸…å•

- [ ] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
- [ ] å·²æ·»åŠ /æ›´æ–°ç›¸å…³æµ‹è¯•
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] å·²æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] Commit æ¶ˆæ¯ç¬¦åˆ Conventional Commits è§„èŒƒ

## æˆªå›¾/å½•å±

å¦‚æœ‰ UI å˜æ›´ï¼Œè¯·é™„ä¸Šæˆªå›¾æˆ–å½•å±
```

### ä»£ç å®¡æŸ¥æµç¨‹

1. **è‡ªåŠ¨æ£€æŸ¥** - CI ä¼šè‡ªåŠ¨è¿è¡Œ lint å’Œæµ‹è¯•
2. **äººå·¥å®¡æŸ¥** - è‡³å°‘éœ€è¦ 1 ä½ç»´æŠ¤è€…å®¡æŸ¥é€šè¿‡
3. **åé¦ˆå¤„ç†** - åŠæ—¶å“åº”å®¡æŸ¥æ„è§å¹¶æ›´æ–°ä»£ç 
4. **æœ€ç»ˆåˆå¹¶** - æ‰€æœ‰æ£€æŸ¥é€šè¿‡åç”±ç»´æŠ¤è€…åˆå¹¶

**å®¡æŸ¥é‡ç‚¹ï¼š**
- ä»£ç è´¨é‡å’Œå¯è¯»æ€§
- æµ‹è¯•è¦†ç›–æ˜¯å¦å……åˆ†
- æ˜¯å¦ç¬¦åˆé¡¹ç›®è§„èŒƒ
- æ˜¯å¦æœ‰æ½œåœ¨çš„æ€§èƒ½é—®é¢˜
- æ–‡æ¡£æ˜¯å¦åŒæ­¥æ›´æ–°

**å®¡æŸ¥ç¤¼ä»ªï¼š**
- å®¡æŸ¥è€…ï¼šæä¾›å…·ä½“ã€å»ºè®¾æ€§çš„åé¦ˆ
- æäº¤è€…ï¼šä»¥å¼€æ”¾å¿ƒæ€æ¥å—å»ºè®®ï¼ŒåŠæ—¶å›å¤

---

## è·å–å¸®åŠ©

å¦‚æœåœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æŸ¥é˜…é¡¹ç›® [README](./README.md) å’Œ [æ–‡æ¡£](./docs/)
2. æœç´¢ [å·²æœ‰ Issues](https://github.com/pmspec/pmspec/issues)
3. åœ¨ [Discussions](https://github.com/pmspec/pmspec/discussions) æé—®
4. åˆ›å»ºæ–° Issue æè¿°é—®é¢˜

---

å†æ¬¡æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼ğŸ‰
